---
layout: default
permalink: /form-handler/
---

<div class="form-handler-container">
  <h1>–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–∫–∏...</h1>
  <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ, –≤–∞—à–∞ –∑–∞—è–≤–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è.</p>
  <div class="loader"></div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL
    const urlParams = new URLSearchParams(window.location.search);
    
    // –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é
    if (!urlParams.has('name') || !urlParams.has('email')) {
      window.location.href = '{{ "/" | relative_url }}';
      return;
    }
    
    // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    const formData = {
      name: urlParams.get('name'),
      phone: urlParams.get('phone'),
      email: urlParams.get('email'),
      services: urlParams.get('services'),
      description: urlParams.get('description'),
      source: urlParams.get('source')
    };
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ GitHub API
    sendToGitHub(formData);
  });
  
  function sendToGitHub(formData) {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º FormSubmit.co –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã
    // –≠—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –±–µ–∑ –±—ç–∫–µ–Ω–¥–∞
    
    // URL –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ FormSubmit.co
    const webhookUrl = 'https://formsubmit.co/ajax/{{ site.form_submission_email }}';
    
    // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è Telegram
    const telegramMessage = `üìã *–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞*\n\n` +
                          `üë§ *–ò–º—è:* ${formData.name}\n` +
                          `üì± *–¢–µ–ª–µ—Ñ–æ–Ω:* ${formData.phone}\n` +
                          `üìß *Email:* ${formData.email}\n` +
                          `üîç *–£—Å–ª—É–≥–∏:* ${formData.services}\n` +
                          `üìù *–û–ø–∏—Å–∞–Ω–∏–µ:* ${formData.description}\n` +
                          `üîé *–ò—Å—Ç–æ—á–Ω–∏–∫:* ${formData.source}`;
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ FormSubmit.co
    fetch(webhookUrl, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        name: formData.name,
        phone: formData.phone,
        email: formData.email,
        services: formData.services,
        description: formData.description,
        source: formData.source,
        // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è FormSubmit.co
        _subject: '–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞ AI Agency',
        _template: 'table',
        _captcha: 'false',
        _autoresponse: '–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à—É –∑–∞—è–≤–∫—É! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.'
      })
    })
    .then(response => response.json())
    .then(data => {
      // –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
      console.log('Success:', data);
      // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å—é
      window.location.href = '{{ "/thank-you/" | relative_url }}';
    })
    .catch(error => {
      // –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
      console.error('Error:', error);
      // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –æ—à–∏–±–∫–æ–π
      window.location.href = '{{ "/error/" | relative_url }}';
    });
  }
</script>

<style>
  .form-handler-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 70vh;
    text-align: center;
    padding: 20px;
  }
  
  .loader {
    border: 5px solid #f3f3f3;
    border-top: 5px solid #000;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1s linear infinite;
    margin-top: 20px;
  }
  
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>
